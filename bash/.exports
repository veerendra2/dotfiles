#!/usr/bin/env bash

# Prepends the given path to $PATH, avoiding duplicates.
# Note: the last path in this file is added first (highest priority)
prepend_path() {
  case ":$PATH:" in
    *":$1:"*) ;;
    *) PATH="$1:$PATH" ;;
  esac
}

export HISTSIZE=50000000;
export HISTFILESIZE=$HISTSIZE;
export HISTCONTROL=ignoredups;
export STARSHIP_CONFIG="${HOME}/.config/starship/starship.toml"
export GOPATH="${HOME}/go"
export NAVI_CONFIG="${HOME}/.config/navi/config.yaml"
export EDITOR=vim

# Setup pyenv
export PYENV_ROOT="$HOME/.pyenv"
if [[ -d $PYENV_ROOT/bin ]]; then
  prepend_path "$PYENV_ROOT/bin"
fi

prepend_path "${HOME}/.krew/bin"
prepend_path "${HOME}/go/bin"
prepend_path "${HOME}/.cargo/bin"
prepend_path "${HOME}/.local/bin"

# Setup homebrew
if [ "$(uname -s)" == "Darwin" ]; then
  # apple silicon
  if [ "$(uname -m)" == "arm64" ]; then
    prepend_path "/opt/homebrew/bin"
  # intel
  else
    prepend_path "/usr/local/bin"
  fi
  # Set Homebrew Cask options
  export HOMEBREW_CASK_OPTS="--appdir=~/Applications --fontdir=/Library/Fonts"

  # Set locale variables for iTerm
  export LC_ALL=en_US.UTF-8
  export LC_CTYPE=en_US.UTF-8
fi

export PATH
